/** 
 *   Stock Boundary
 */




var seaSide = [
createPoint(33.7609627529093, -118.23950822906488),
createPoint(33.76514592470526, -118.24017287457258),
createPoint(33.75950885221525, -118.25785399639875),
createPoint(33.74937546073221, -118.26892615521223),
createPoint(33.74916136207781, -118.26420546734602)
];

var harry = [
createPoint(33.769997791448844, -118.27845336163313),
createPoint(33.7706042554759, -118.27051202294905),
createPoint(33.768071347831125, -118.2651905202635),
createPoint(33.765716746815684, -118.26454679009993),
createPoint(33.76200633513638, -118.26973754675276),
createPoint(33.75683289690615, -118.27196914465316),
createPoint(33.75733241490496, -118.27394325048812),
createPoint(33.767108109780914, -118.27051002294905),
createPoint(33.766323241142, -118.27720481665023)
];

//PIER C BERTHS C60-C62
//1521 Pier C St., Long Beach, CA 90813
var pico = [
createPoint(33.77682918216392, -118.20863355422944),
createPoint(33.77096991553549, -118.22196658210748),
createPoint(33.768597556637154, -118.22036798553461),
createPoint(33.77347598272601, -118.20790199337739),
createPoint(33.775723354301164, -118.20807365475434)
]

// Berths 226-236
// Seaside Transportation Service 
// 389 Terminal Island Way
// Terminal Island, CA 90731
var ferry = [
createPoint(33.748929421265665, -118.26956734304781),
createPoint(33.74835848736302, -118.26523289327974),
createPoint(33.748429854308725, -118.26441750173922),
createPoint(33.748715321497635, -118.26313004141207),
createPoint(33.74568218402487, -118.26154217367525),
createPoint(33.744754379372374, -118.2663057768857),
createPoint(33.74468300936799, -118.26669201498385),
createPoint(33.741756788053905, -118.26497540121431),
createPoint(33.739365777018, -118.27171311025972),
createPoint(33.73840221641706, -118.27222809439058),
createPoint(33.73640368585345, -118.27154144888277),
createPoint(33.73565422488922, -118.27265724783297),
createPoint(33.7355828473131, -118.2743738616025),
createPoint(33.74068619433744, -118.27476009970064)
];

var navywayIn = [
createPoint(33.74556620899212, -118.2453661735534),
createPoint(33.74544131262771, -118.24596698837274),
createPoint(33.73352179418946, -118.24270542221063),
createPoint(33.72881062971061, -118.25806911544794),
createPoint(33.72495584821085, -118.25515087203974),
createPoint(33.72417059371614, -118.25249012069696),
createPoint(33.72838232920512, -118.23849971847528),
createPoint(33.73355748384227, -118.2400875862121)
];

var navywayOut = [
createPoint(33.72881062971061, -118.25832660751337),
createPoint(33.72445614163633, -118.26201732711786),
createPoint(33.71667462106337, -118.25854118423456),
createPoint(33.71496116398435, -118.24716861801141),
createPoint(33.72313547454208, -118.23210533218378),
createPoint(33.733468259682404, -118.2399802978515),
createPoint(33.72834663739984, -118.23854263381952),
createPoint(33.724027819399794, -118.25261886672968)
];

// Long Beach Container Terminal
// PIER F BERTHS F6-F10
var pierF = [
createPoint(33.762318515384784, -118.2066779907226),
createPoint(33.7624790647841, -118.20734317855829),
createPoint(33.75648501658039, -118.20787962036127),
createPoint(33.7525601151014, -118.2154327209472),
createPoint(33.746351267689285, -118.2156472976684),
createPoint(33.740141970742194, -118.20654924468988),
createPoint(33.74267570367027, -118.20680673675531),
createPoint(33.746922214955326, -118.21281488494867),
createPoint(33.75156102058127, -118.20560510711664),
createPoint(33.75470099272808, -118.2055621917724)
];

//International Transportation Service
//
var pierG = [
createPoint(33.754950758302314, -118.20431764678949),
createPoint(33.752167615071166, -118.19856699066156),
createPoint(33.75191784138916, -118.19732244567865),
createPoint(33.75202488734198, -118.19594915466303),
createPoint(33.75152533841879, -118.1945758636474),

createPoint(33.74726121309604, -118.1900375659942),

createPoint(33.74649400486214, -118.1899839218139),
createPoint(33.74217610028443, -118.1899839218139),
createPoint(33.74178355272551, -118.19088514404291),
createPoint(33.74196198365682, -118.19161470489496),
createPoint(33.74303256144995, -118.19243009643549),
createPoint(33.74381764333901, -118.19247301177973),
createPoint(33.74670811017599, -118.19809492187494),
createPoint(33.74371058714093, -118.20358808593744),
createPoint(33.74470977312649, -118.20457513885492)
];


//Pacific Container Terminal
//PIER J BERTHS J243-J247, J266-J270
//1521 Pier J Avenue, Long Beach, CA 90802
var harborScienic = [
createPoint(33.74706495117791, -118.18921144561762),
createPoint(33.73614494411756, -118.1852632339477),
createPoint(33.732861532934734, -118.1852632339477),
createPoint(33.73250463284381, -118.19667871551508),
createPoint(33.73614494411756, -118.20294435577387),
createPoint(33.739214106159544, -118.20448930816644),
createPoint(33.74071295934308, -118.20217187957758),
createPoint(33.740356091912936, -118.19539125518793),
createPoint(33.74303256144995, -118.19243009643549),
createPoint(33.74196198365682, -118.19161470489496),
createPoint(33.74178355272551, -118.19088514404291),
createPoint(33.74217610028443, -118.1899839218139),
createPoint(33.74649400486214, -118.1899839218139)
];

var john = [
createPoint(33.76874917552405, -118.2804234674681),
createPoint(33.76075760277206, -118.27574569494612),
createPoint(33.75619065520226, -118.2772906473387),
createPoint(33.75005343627797, -118.27364284307845),
createPoint(33.750481628597655, -118.27754813940413),
createPoint(33.749946387863965, -118.28085262091048),
createPoint(33.752265740247246, -118.28265506536849),
createPoint(33.75247983115056, -118.2838996103514),
createPoint(33.75158778219343, -118.28694659979232),
createPoint(33.75372868409881, -118.29003650457747),
createPoint(33.75613713484308, -118.28969118182357),
createPoint(33.759455333927704, -118.28634178497293),
createPoint(33.761025189810205, -118.28419601776102),
createPoint(33.765716746815684, -118.28136160504124)
]
//------------------------------------------------------

// Berths 302-305
// Eagle Marine Services, Ltd.
// 614 Terminal Way
// Terminal Island, CA 90731
var tandc = [
createPoint(33.74169433712067, -118.26489265518182),
createPoint(33.739999222998115, -118.2646351631164),
createPoint(33.73741187896576, -118.26315458374017),
createPoint(33.73054165580861, -118.26263959960932),
createPoint(33.73400360324984, -118.24997957305902),
createPoint(33.73625200975805, -118.24407871322626),
createPoint(33.73891076363836, -118.24523742752069),
createPoint(33.74428155198661, -118.25167472915643),
createPoint(33.74961632107941, -118.25027998046869),
createPoint(33.751114992483245, -118.25180347518915),
createPoint(33.74428155198661, -118.25622375564569),
createPoint(33.74310393282772, -118.25851972656244),
createPoint(33.74367490171187, -118.26027925567621)
];


//Total Terminals International
//PierT
//301 Hanjin Road, Long Beach, CA 90802
//Hanjin
var seaSideFwy = [
createPoint(33.76000835462108, -118.23247702795385),
createPoint(33.76007971187001, -118.2302883453977),
createPoint(33.761292776013036, -118.22852881628393),
createPoint(33.762933953115756, -118.224580604614),
createPoint(33.76279124331086, -118.22243483740209),
createPoint(33.753942771349216, -118.21779998022436),
createPoint(33.75240846757555, -118.22294982153295),
createPoint(33.75679721693776, -118.22483809667943),
createPoint(33.7505173111945, -118.24642451483129),
createPoint(33.75501319958226, -118.24814112860082)
];

var eastChan = [
createPoint(33.71606777559191, -118.27720935897821),
createPoint(33.71792399529288, -118.26763923721307),
createPoint(33.72895339607076, -118.27233846740717),
createPoint(33.726918953016714, -118.28150089340204)
];

var berth = [
createPoint(33.75400521336313, -118.26611574249262),
createPoint(33.7593215380626, -118.26098735885614),
createPoint(33.76285367887967, -118.26148088531488),
createPoint(33.76444131091949, -118.2635193641662),
createPoint(33.76012431012036, -118.26326187210077)
];

//SSA Terminal 
// Pier A
var terminalIsland = [
createPoint(33.76731324471745, -118.2394223983764),
createPoint(33.7700602217674, -118.22691257553095),
createPoint(33.77043480272393, -118.22686966018671),
createPoint(33.771041263657835, -118.22504575805658),
createPoint(33.77205796794597, -118.22564657287592),
createPoint(33.77371677535748, -118.22566803054804),
createPoint(33.77940641911543, -118.2147460754394),
createPoint(33.78186765260286, -118.22034652786249),
createPoint(33.781600130649785, -118.22637613372797),
createPoint(33.77931724266137, -118.22895105438226),
createPoint(33.77690944330793, -118.23092516021723),
createPoint(33.775072336061086, -118.23693330841058),
createPoint(33.774947482682585, -118.23925073699945),
createPoint(33.77412701309693, -118.2399802978515),
createPoint(33.770523988424635, -118.24013050155634)
];


var school = [
createPoint(33.78810959427681, -118.10805852966303),
createPoint(33.78165363510723, -118.10810144500726),
createPoint(33.781617965472634, -118.11149175720209),
createPoint(33.78850192969818, -118.11595495300287)
]

var boundary =[seaSide, seaSideFwy, terminalIsland,berth,eastChan,
                         tandc,john,pierF,pierG, harborScienic, 
                         harry,ferry,pico,navywayIn, navywayOut,
                         school
                         ];

/**
 *  Fence In Boundary
 */                    

// function pointsToGoogleMapPath(points) {
//     var temp = [];
//     for(var i in points) {
//         temp.push(new google.maps.LatLng(points[i].X, points[i].Y));
//     }
//     return temp;
// }

// function boundaryToGooleMapBoundary(boundary) {
//     var temp = [];
//     for(var i in boundary) {
//         temp.push(pointsToGoogleMapPath(boundary[i]));
//     }
//     return temp;
// }

// var boundaryAsGoogleMapPath =boundaryToGooleMapBoundary(boundary);
// console.log(boundaryAsGoogleMapPath);
function createPoint(x,y) {
    var temp = { X: x, Y: y };
    return temp;
}

function checkData(data) {
    for(var i in boundary) {
       var isIn = pointInPolygon(boundary[i], createPoint(data.latitude, data.longitude));
       if(isIn)
        return true;
    }
    return false;
    //return pointInPolygon()
}

function pointInPolygon(listOfPoints, point)
{
    var j = listOfPoints.length - 1;
    var oddNodes = false;

    for (var i = 0; i < listOfPoints.length; i++)
    {
        if (listOfPoints[i].Y < point.Y && listOfPoints[j].Y >= point.Y ||
            listOfPoints[j].Y < point.Y && listOfPoints[i].Y >= point.Y)
        {
        	//console.log("Checkin deno: " + listOfPoints[j].Y - listOfPoints[i].Y);
        	/**
        	 *     A - X1 		  X2-X1
        	 *    ________  =  _______
        	 *
        	 *	   Y - y1       Y2-Y1
        	 */
            if (listOfPoints[i].X +
                (point.Y - listOfPoints[i].Y)/(listOfPoints[j].Y - listOfPoints[i].Y)*(listOfPoints[j].X - listOfPoints[i].X) < point.X)
            {
          //  	console.log("intersect: x1: " + listOfPoints[i].X + " Ty: " + point.Y + 
          //  		" y1: " + listOfPoints[i].Y  + " y2: " + listOfPoints[j].Y + " x2: " + listOfPoints[j].X);
                oddNodes = !oddNodes;
            }
        }
        j = i;
    }

    return oddNodes;
}

exports.checkData = checkData;
